{"ast":null,"code":"var _jsxFileName = \"/Users/surajs/Coding/React/webapi/src/components/electronics/ElectronicsUpdate.js\",\n  _s = $RefreshSig$();\nimport axios from 'axios';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { ref, uploadBytesResumable, getDownloadURL, getStorage } from \"firebase/storage\";\nimport { storage } from '../Firebase';\nimport Nav from '../nav/Nav';\nimport \"./electronics.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ElectronicsUpdate() {\n  _s();\n  const idRef = useRef();\n  const brandRef = useRef();\n  const ratingRef = useRef();\n  const descriptionRef = useRef();\n  const [file, setFile] = useState();\n  const [downlaod, setDownload] = useState();\n  const formHandler = e => {\n    e.preventDefault();\n    const storage = getStorage();\n    const metadata = {\n      contentType: 'image/jpeg'\n    };\n    const storageRef = ref(storage, 'images/' + file.name);\n    const uploadTask = uploadBytesResumable(storageRef, file, metadata);\n    uploadTask.on('state_changed', snapshot => {\n      const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n      console.log('Upload is ' + progress + '% done');\n      switch (snapshot.state) {\n        case 'paused':\n          console.log('Upload is paused');\n          break;\n        case 'running':\n          console.log('Upload is running');\n          break;\n      }\n    }, error => {\n      switch (error.code) {\n        case 'storage/unauthorized':\n          break;\n        case 'storage/canceled':\n          break;\n\n        // ...\n\n        case 'storage/unknown':\n          break;\n      }\n    }, () => {\n      getDownloadURL(uploadTask.snapshot.ref).then(downloadURL => {\n        setDownload(downloadURL);\n        console.log('File available at', downloadURL);\n      });\n    });\n    if (progress == 100) {\n      axios.put(\"http://localhost:8080/electronics\", {\n        id: idRef.current.value,\n        name: descriptionRef.current.value,\n        brand: brandRef.current.value,\n        rating: ratingRef.current.value,\n        img: downlaod\n      }).then(res => {\n        console.log(res.data);\n      }).then(err => console.log(err));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Nav, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"add-wrap\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: formHandler,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          ref: idRef,\n          placeholder: \"id\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          ref: descriptionRef,\n          placeholder: \"Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          ref: brandRef,\n          placeholder: \"Brand\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          ref: ratingRef,\n          placeholder: \"rating\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          onChange: e => setFile(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n}\n_s(ElectronicsUpdate, \"W2p5+sH2LurhHxyAJ9maJ6hu4QY=\");\n_c = ElectronicsUpdate;\nvar _c;\n$RefreshReg$(_c, \"ElectronicsUpdate\");","map":{"version":3,"names":["axios","React","useEffect","useRef","useState","ref","uploadBytesResumable","getDownloadURL","getStorage","storage","Nav","jsxDEV","_jsxDEV","Fragment","_Fragment","ElectronicsUpdate","_s","idRef","brandRef","ratingRef","descriptionRef","file","setFile","downlaod","setDownload","formHandler","e","preventDefault","metadata","contentType","storageRef","name","uploadTask","on","snapshot","progress","bytesTransferred","totalBytes","console","log","state","error","code","then","downloadURL","put","id","current","value","brand","rating","img","res","data","err","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onSubmit","type","placeholder","onChange","target","files","_c","$RefreshReg$"],"sources":["/Users/surajs/Coding/React/webapi/src/components/electronics/ElectronicsUpdate.js"],"sourcesContent":["import axios from 'axios'\nimport React, { useEffect, useRef, useState } from 'react'\nimport { ref, uploadBytesResumable, getDownloadURL,getStorage } from \"firebase/storage\";\n\nimport { storage } from '../Firebase';\nimport Nav from '../nav/Nav';\n\nimport \"./electronics.css\"\n\nexport default function ElectronicsUpdate(){\n\n\n    const idRef=useRef();\n    const brandRef=useRef();\n    const ratingRef=useRef();\n    const descriptionRef=useRef()\n\n\n    const [file,setFile]=useState();\n    const [downlaod,setDownload]=useState();\n\n    const formHandler=(e)=>{\n        e.preventDefault();\n        const storage = getStorage();\n        const metadata = {\n            contentType: 'image/jpeg'\n          };\n         \n          const storageRef = ref(storage, 'images/' + file.name);\n          const uploadTask = uploadBytesResumable(storageRef, file, metadata);\n          \n      \n          uploadTask.on('state_changed',\n            (snapshot) => {\n              \n              const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n              console.log('Upload is ' + progress + '% done');\n              switch (snapshot.state) {\n                case 'paused':\n                  console.log('Upload is paused');\n                  break;\n                case 'running':\n                  console.log('Upload is running');\n                  break;\n              }\n            }, \n            (error) => {\n              \n              switch (error.code) {\n                case 'storage/unauthorized':\n                 \n                  break;\n                case 'storage/canceled':\n                  \n                  break;\n          \n                // ...\n          \n                case 'storage/unknown':\n                   \n                  break;\n              }\n            }, \n            () => {\n              getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\n                setDownload(downloadURL)\n                console.log('File available at', downloadURL);\n              });\n            }\n          );\n   \n\n\n    if(progress==100){\n        \n    \n    axios.put(\"http://localhost:8080/electronics\",{\n        id:idRef.current.value,\n        name:descriptionRef.current.value,\n        brand:brandRef.current.value,\n        rating:ratingRef.current.value,\n        img:downlaod\n        \n   }\n  )\n    .then(\n       res=>{\n       console.log(res.data)\n       }\n    ).then(err=>console.log(err))\n\n\n\n\n}\n    }\n  return (\n    <>\n        <Nav />\n\n\n    <div className='add-wrap'>\n\n                <form onSubmit={formHandler}>\n                    <input type=\"text\"   ref={idRef} placeholder=\"id\" />\n                    <input type=\"text\"  ref={descriptionRef}   placeholder=\"Name\" />\n                    <input type=\"text\"  ref={brandRef}   placeholder=\"Brand\" />\n\n                    <input type=\"text\"    ref={ratingRef} placeholder=\"rating\" />\n                    {/* <input type=\"text\"    ref={imgRef} placeholder=\"img\" />\n                     */}\n\n                     <input type=\"file\" onChange={(e)=>setFile(e.target.files[0])} />\n\n                    <input type=\"submit\"></input>\n                </form>\n    </div>\n        \n      \n    </>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}