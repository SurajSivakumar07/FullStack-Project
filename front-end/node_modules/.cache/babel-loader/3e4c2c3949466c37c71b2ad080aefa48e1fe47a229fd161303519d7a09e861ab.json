{"ast":null,"code":"var _jsxFileName = \"/Users/surajs/Coding/React/webapi/src/components/electronics/ElecAdd.js\",\n  _s = $RefreshSig$();\nimport axios from 'axios';\nimport React, { useEffect, useRef, useState } from 'react';\nimport Nav from '../nav/Nav';\nimport { getStorage, ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\nimport \"./electronics.css\";\nimport { useNavigate } from 'react-router';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ElecAdd() {\n  _s();\n  const idRef = useRef();\n  const imgRef = useRef();\n  const brandRef = useRef();\n  const ratingRef = useRef();\n  const descriptionRef = useRef();\n  const [file, setFile] = useState();\n  const [img, setImg] = useState();\n  const [progerss, setProgess] = useState();\n  const navigate = useNavigate();\n  const btnHanlder = () => {\n    const storage = getStorage();\n\n    /** @type {any} */\n    const metadata = {\n      contentType: 'image/jpeg'\n    };\n\n    // Upload file and metadata to the object 'images/mountains.jpg'\n    const storageRef = ref(storage, 'images/' + file.name);\n    const uploadTask = uploadBytesResumable(storageRef, file, metadata);\n\n    // Listen for state changes, errors, and completion of the upload.\n    uploadTask.on('state_changed', snapshot => {\n      // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n      const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n      setProgess(progress);\n      console.log('Upload is ' + progress + '% done');\n      switch (snapshot.state) {\n        case 'paused':\n          console.log('Upload is paused');\n          break;\n        case 'running':\n          console.log('Upload is running');\n          break;\n      }\n    }, error => {\n      // A full list of error codes is available at\n      // https://firebase.google.com/docs/storage/web/handle-errors\n      switch (error.code) {\n        case 'storage/unauthorized':\n          // User doesn't have permission to access the object\n          break;\n        case 'storage/canceled':\n          // User canceled the upload\n          break;\n\n        // ...\n\n        case 'storage/unknown':\n          // Unknown error occurred, inspect error.serverResponse\n          break;\n      }\n    }, () => {\n      // Upload completed successfully, now we can get the download URL\n      getDownloadURL(uploadTask.snapshot.ref).then(downloadURL => {\n        setImg(downloadURL);\n        console.log('File available at', downloadURL);\n      });\n    });\n  };\n  const formHandler = e => {\n    e.preventDefault();\n    if (progerss == 100) {\n      axios.post(\"http://localhost:8080/electronics\", {\n        id: idRef.current.value,\n        name: descriptionRef.current.value,\n        brand: brandRef.current.value,\n        rating: ratingRef.current.value,\n        img: img\n      }).then(res => {\n        console.log(res.data);\n        if (res.ok) {\n          navigate(\"/\");\n        }\n      }).then(err => console.log(err));\n    } else {\n      alert(\"File dint upload\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Nav, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"add-wrap\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: formHandler,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          ref: idRef,\n          placeholder: \"id\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          ref: descriptionRef,\n          placeholder: \"Type\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          ref: brandRef,\n          placeholder: \"brand\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          ref: ratingRef,\n          placeholder: \"rating\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          onChange: e => setFile(e.target.files[0]),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: btnHanlder,\n          children: \"Upload\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n}\n_s(ElecAdd, \"c9rRxdo3XNgk+vvPhORYVF5wOuk=\", false, function () {\n  return [useNavigate];\n});\n_c = ElecAdd;\nvar _c;\n$RefreshReg$(_c, \"ElecAdd\");","map":{"version":3,"names":["axios","React","useEffect","useRef","useState","Nav","getStorage","ref","uploadBytesResumable","getDownloadURL","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","ElecAdd","_s","idRef","imgRef","brandRef","ratingRef","descriptionRef","file","setFile","img","setImg","progerss","setProgess","navigate","btnHanlder","storage","metadata","contentType","storageRef","name","uploadTask","on","snapshot","progress","bytesTransferred","totalBytes","console","log","state","error","code","then","downloadURL","formHandler","e","preventDefault","post","id","current","value","brand","rating","res","data","ok","err","alert","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onSubmit","type","placeholder","required","onChange","target","files","onClick","_c","$RefreshReg$"],"sources":["/Users/surajs/Coding/React/webapi/src/components/electronics/ElecAdd.js"],"sourcesContent":["import axios from 'axios'\nimport React, { useEffect, useRef, useState } from 'react'\nimport Nav from '../nav/Nav';\nimport { getStorage, ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\n\n\nimport \"./electronics.css\"\nimport { useNavigate } from 'react-router';\n\nexport default function ElecAdd() {\n\n\n    const idRef=useRef();\n    const imgRef=useRef();\n    const brandRef=useRef();\n  \n    const ratingRef=useRef();\n\n    const descriptionRef=useRef()\n\n \n\n    const[file,setFile]=useState();\n    const[img,setImg]=useState();\n\n    const[progerss,setProgess]=useState();\n\n\n    const navigate=useNavigate();\n    const btnHanlder=()=>{\n      const storage = getStorage();\n\n \n/** @type {any} */\nconst metadata = {\n  contentType: 'image/jpeg'\n};\n\n// Upload file and metadata to the object 'images/mountains.jpg'\nconst storageRef = ref(storage, 'images/' + file.name);\nconst uploadTask = uploadBytesResumable(storageRef, file, metadata);\n\n// Listen for state changes, errors, and completion of the upload.\nuploadTask.on('state_changed',\n  (snapshot) => {\n    // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n    const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n\n    setProgess(progress);\n    console.log('Upload is ' + progress + '% done');\n    switch (snapshot.state) {\n      case 'paused':\n        console.log('Upload is paused');\n        break;\n      case 'running':\n        console.log('Upload is running');\n        break;\n    }\n  }, \n  (error) => {\n    // A full list of error codes is available at\n    // https://firebase.google.com/docs/storage/web/handle-errors\n    switch (error.code) {\n      case 'storage/unauthorized':\n        // User doesn't have permission to access the object\n        break;\n      case 'storage/canceled':\n        // User canceled the upload\n        break;\n\n      // ...\n\n      case 'storage/unknown':\n        // Unknown error occurred, inspect error.serverResponse\n        break;\n    }\n  }, \n  () => {\n    // Upload completed successfully, now we can get the download URL\n    getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\n\n      setImg(downloadURL)\n      console.log('File available at', downloadURL);\n    });\n  }\n);\n    }\n\n\n    const formHandler=(e)=>{\n        e.preventDefault();\n\n\n   if(progerss==100){\n\n        axios.post(\"http://localhost:8080/electronics\",{\n          id:idRef.current.value,\n          name:descriptionRef.current.value,\n          brand:brandRef.current.value,\n          rating:ratingRef.current.value,\n          img:img\n    }\n    )\n      .then(\n        res=>{\n        console.log(res.data)\n        if(res.ok){\n          navigate(\"/\");\n        }\n        }\n      ).then(err=>console.log(err))\n\n\n\n}\n\nelse{\n  alert(\"File dint upload\")\n}\n  \n\n}\n\n  return (\n    <>\n        <Nav />\n\n\n    <div className='add-wrap'>\n\n                <form onSubmit={formHandler}>\n                    <input type=\"text\"   ref={idRef} placeholder=\"id\"  required/>\n                    <input type=\"text\"  ref={descriptionRef}   placeholder=\"Type\" required />\n                    <input type=\"text\"  ref={brandRef}   placeholder=\"brand\" required/>\n\n                    <input type=\"text\"    ref={ratingRef} placeholder=\"rating\" required />\n                 \n                    <input type=\"file\" onChange={(e)=>setFile(e.target.files[0])} required/>\n\n                    <button onClick={btnHanlder}>Upload</button>\n\n                    <input type=\"submit\"></input>\n                </form>\n    </div>\n        \n      \n    </>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}